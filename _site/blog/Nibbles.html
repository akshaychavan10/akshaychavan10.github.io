<!DOCTYPE html>

<!--
  portfolYOU Jekyll theme by yousinix
  Free for personal and commercial use under the MIT license
  https://github.com/yousinix/portfolYOU
-->

<html lang="en" class="h-100">

<head>

  
  
  

  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:type" content="website">
  <meta property="og:title" content="Nibbles">
  <meta property="og:description" content="HackTheBox - Medium">
  <meta property="og:image" content="/assets/img/profile.png">

  <title>Nibbles</title>
  <meta name="description" content="HackTheBox - Medium">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico">

  <!-- Theme style -->
  <script src="/assets/js/theme.js"></script>

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

  <!-- Bootstrap CSS CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">

  <!-- Animate CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/style.css">

</head>


<body class="h-100 d-flex flex-column">

  <main class="flex-shrink-0 container mt-5">
    <nav class="navbar navbar-expand-lg navbar-themed">

  <a class="navbar-brand" href="/"><h5><b>Akshay Chavan</b></h5></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-1x fa-bars text-themed"></i>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav ml-auto">
<a class="nav-item nav-link " href="/projects/">Projects</a>

      <a class="nav-item nav-link active" href="/blog/">Blog</a>

      <a class="nav-item nav-link " href="/about/">About</a>

      

      <span id="theme-toggler" class="nav-item nav-link" role="button" onclick="toggleTheme()"></span>
    </div>
  </div>

</nav>
    <div class="col-lg-10 mx-auto mt-5 markdown-body">
  <h1><b>Nibbles</b></h1>

<p class="post-metadata text-muted">
  25 August 2023 -  
  <b>2 mins read time</b>

  <br>Tags: 
    
    <a class="text-decoration-none no-underline" href="/blog/tags#weakauthentication">
      <span class="tag badge badge-pill text-primary border border-primary">WeakAuthentication</span>
    </a>
    
    <a class="text-decoration-none no-underline" href="/blog/tags#sudo">
      <span class="tag badge badge-pill text-primary border border-primary">SUDO</span>
    </a>
    </p>

<p><img src="/assets/ctf/htb_media/nibble_infocard.png" alt="infocard"></p>

<h2 id="introduction">Introduction</h2>

<p>Nibble is an easy machine on HackTheBox that involves exploiting default credentials and an arbitrary file upload vulnerability to gain initial access. Privilege escalation is achieved through a misconfigured script with improper permissions. This walkthrough will guide you through the process of compromising the Nibble machine, from initial reconnaissance to gaining root access.</p>

<h2 id="initial-enumeration">Initial Enumeration</h2>

<h3 id="nmap-scan">Nmap Scan</h3>

<p>The first step in any penetration test is enumeration. We start by scanning the target machine using Nmap to identify open ports and services.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-sV</span> <span class="nt">-sC</span> <span class="nt">-p-</span> 10.10.10.75 <span class="o">&gt;</span> nmap/service.log
</code></pre></div></div>

<p><strong>Nmap Results:</strong></p>

<pre><code class="language-nmap">Starting Nmap 7.80 ( https://nmap.org ) at 2020-12-01 11:26 EST
Nmap scan report for 10.10.10.75
Host is up (0.19s latency).

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.2 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 c4:f8:ad:e8:f8:04:77:de:cf:15:0d:63:0a:18:7e:49 (RSA)
|   256 22:8f:b1:97:bf:0f:17:08:fc:7e:2c:8f:e9:77:3a:48 (ECDSA)
|_  256 e6:ac:27:a3:b5:a9:f1:12:3c:34:a5:5d:5b:eb:3d:e9 (ED25519)
80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 14.65 seconds
</code></pre>

<p><strong>Key Services Identified:</strong></p>

<ul>
  <li>
<strong>SSH (22):</strong> OpenSSH 7.2p2</li>
  <li>
<strong>HTTP (80):</strong> Apache httpd 2.4.18</li>
</ul>

<h3 id="web-enumeration">Web Enumeration</h3>

<p>Visiting the HTTP service on port 80 revealed a webpage with a directory named <code class="language-plaintext highlighter-rouge">nibble</code>.</p>

<p><strong>Directory Discovery:</strong></p>

<p><img src="/assets/ctf/htb_media/nibble_nibble.png" alt="Nibble Directory"></p>

<p><strong>Directory Brute-Forcing:</strong></p>

<p>Using <code class="language-plaintext highlighter-rouge">ffuf</code>, we discovered several directories:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffuf <span class="nt">-w</span> /usr/share/wordlists/dirb/common.txt <span class="nt">-u</span> http://10.10.10.75/FUZZ
</code></pre></div></div>

<p><strong>Key Directories Identified:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/nibble</code></li>
  <li><code class="language-plaintext highlighter-rouge">/nibble/admin.php</code></li>
</ul>

<h2 id="gaining-initial-access">Gaining Initial Access</h2>

<h3 id="discovering-default-credentials">Discovering Default Credentials</h3>

<p>In the <code class="language-plaintext highlighter-rouge">/nibble/content/private/users.xml</code> file, we found the username <code class="language-plaintext highlighter-rouge">admin</code>.</p>

<p><strong>Admin Username:</strong></p>

<p><img src="/assets/ctf/htb_media/nibble_admin.png" alt="Admin Username"></p>

<h3 id="exploiting-the-arbitrary-file-upload-vulnerability">Exploiting the Arbitrary File Upload Vulnerability</h3>

<p>Using the default credentials <code class="language-plaintext highlighter-rouge">admin:nibbles</code>, we logged into the NibbleBlog admin dashboard. Researching NibbleBlog vulnerabilities revealed an arbitrary file upload exploit.</p>

<p><strong>Exploit Search:</strong></p>

<p><img src="/assets/ctf/htb_media/nibble_searchsploit.png" alt="Searchsploit"></p>

<h3 id="uploading-a-php-reverse-shell">Uploading a PHP Reverse Shell</h3>

<p>We uploaded a PHP reverse shell to gain a user shell on the machine.</p>

<p><strong>User Shell Obtained:</strong></p>

<p><img src="/assets/ctf/htb_media/nibble_user.png" alt="User Shell"></p>

<h2 id="privilege-escalation">Privilege Escalation</h2>

<h3 id="enumerating-user-files">Enumerating User Files</h3>

<p>In the home directory, we found a file named <code class="language-plaintext highlighter-rouge">personal.zip</code>. Extracting this file revealed a script named <code class="language-plaintext highlighter-rouge">monitor.sh</code> with 777 permissions.</p>

<p><strong>Script Permissions:</strong></p>

<p><img src="/assets/ctf/htb_media/nibble_root.png" alt="Script Permissions"></p>

<h3 id="exploiting-misconfigured-permissions">Exploiting Misconfigured Permissions</h3>

<p>The <code class="language-plaintext highlighter-rouge">monitor.sh</code> script had improper permissions, allowing us to modify it. We replaced the script with a reverse shell payload to gain root access.</p>

<p><strong>Root Shell Obtained:</strong></p>

<p><img src="/assets/ctf/htb_media/nibble_root.png" alt="Root Shell"></p>

<h3 id="alternative-privilege-escalation">Alternative Privilege Escalation</h3>

<p>The machine also had an outdated kernel version, which could be exploited using a kernel exploit. However, this method was not pursued in this walkthrough.</p>

<h2 id="conclusion">Conclusion</h2>

<p>The Nibble machine on HackTheBox provided a comprehensive challenge, encompassing web application enumeration, default credential exploitation, and privilege escalation through misconfigured permissions. By methodically enumerating services and exploiting discovered vulnerabilities, we successfully compromised the machine and gained root access. This walkthrough underscores the importance of thorough enumeration and the effective use of discovered vulnerabilities in penetration testing.</p>



</div>
  </main>
  <footer class="mt-auto py-3 text-center">

  <small class="text-muted mb-2">
    <i class="fas fa-code"></i> with <i class="fas fa-heart"></i>
    by <strong>Akshay Chavan</strong>
  </small>

  <div class="container-fluid justify-content-center">
<a class="social mx-1" href="mailto:akschavan100@gmail.com" style="color: #6c757d" onmouseover="this.style.color='#db4437'" onmouseout="this.style.color='#6c757d'">
      <i class="fas fa-envelope fa-1x"></i>
    </a><a class="social mx-1" href="https://www.github.com/akshaychavan10" style="color: #6c757d" onmouseover="this.style.color='#333333'" onmouseout="this.style.color='#6c757d'">
      <i class="fab fa-github fa-1x"></i>
    </a><a class="social mx-1" href="https://www.linkedin.com/in/akshaychavan07" style="color: #6c757d" onmouseover="this.style.color='#007bb5'" onmouseout="this.style.color='#6c757d'">
      <i class="fab fa-linkedin-in fa-1x"></i>
    </a>

</div>
<small id="attribution">
    theme <a href="https://github.com/yousinix/portfolYOU">portfolYOU</a>
  </small>

</footer>

  
  <!-- GitHub Buttons -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- jQuery CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Popper.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

<!-- Bootstrap JS CDN -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- wow.js CDN & Activation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script>
<script> new WOW().init(); </script>

<!-- Initialize all tooltips -->
<script>
$(function () {
    $('[data-toggle="tooltip"]').tooltip()
})
</script>
</body>

</html>