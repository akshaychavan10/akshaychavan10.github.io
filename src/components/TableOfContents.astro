---
interface Props {
  headings: {
    depth: number;
    slug: string;
    text: string;
  }[];
}

const { headings } = Astro.props;
---

<nav class="toc hidden lg:block">
  <div class="sticky top-24">
    <h2 class="text-sm font-semibold mb-4 text-gray-900">On this page</h2>
    <ul class="space-y-3 text-sm">
      {
        headings.map((heading) => (
          <li class={`${heading.depth === 2 ? 'ml-0' : 'ml-3'}`}>
            <a
              href={`#${heading.slug}`}
              class="text-gray-600 hover:text-indigo-600 transition-colors duration-200"
            >
              {heading.text}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</nav>

<style>
  .toc {
    width: 240px;
    position: fixed;
    right: max(2rem, calc(50% - 48rem));
    top: 4rem;
    height: calc(100vh - 4rem);
    overflow-y: auto;
    padding: 2rem 0.5rem;
  }

  .toc::-webkit-scrollbar {
    width: 4px;
  }

  .toc::-webkit-scrollbar-track {
    background: transparent;
  }

  .toc::-webkit-scrollbar-thumb {
    background: #e5e7eb;
    border-radius: 2px;
  }

  .toc::-webkit-scrollbar-thumb:hover {
    background: #d1d5db;
  }
</style>